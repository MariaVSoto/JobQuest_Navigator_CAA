# 需求分析

## 项目概述

根据提供的文档，我们需要开发基于Django框架的微服务，主要包括两个核心服务：

1. **简历管理服务（Resume Management Service）**
2. **AI建议服务（AI Suggestion Service）**

这两个服务是JobQuest Navigator项目的一部分，旨在帮助用户管理多个简历版本并获取AI驱动的建议。

## 简历管理服务需求

### 功能需求

1. **简历版本控制系统**
   - 跟踪不同的简历版本
   - 允许用户查看、编辑和选择简历版本
   - 维护版本历史记录

2. **Jobscan简历库集成**
   - 访问Jobscan的简历模板和库
   - 导入和导出简历功能
   - 安全可靠的集成

3. **文件管理**
   - 上传、存储和检索简历文件
   - 支持多种文件格式（如PDF、DOCX等）
   - 文件版本控制

### API端点

根据Swagger API定义，简历管理服务需要实现以下API端点：

- `POST /api/resumes`: 上传新简历
- `GET /api/resumes`: 列出当前用户的所有简历
- `GET /api/resumes/{resumeId}`: 获取特定简历及其版本
- `DELETE /api/resumes/{resumeId}`: 删除简历
- `GET /api/resumes/{resumeId}/versions`: 列出简历的所有版本
- `POST /api/resumes/{resumeId}/versions`: 为简历上传新版本
- `GET /api/files/{fileId}`: 下载文件（简历）
- `DELETE /api/files/{fileId}`: 删除文件

### 数据存储

- 简历文件存储在S3中
- S3路径格式：`resumes/{user_id}/{resume_id}/{version_id}/{filename}`
- 文件大小限制：每个文件10MB（可配置）
- 数据库仅存储元数据（S3路径、版本、用户等）

## AI建议服务需求

### 功能需求

1. **推荐引擎**
   - 分析工作描述并匹配简历版本
   - 显示带有置信度分数的推荐
   - 允许用户覆盖推荐

2. **AI驱动的建议**
   - 为简历提供改进建议
   - 基于简历推荐工作
   - 提供初步的面试问题想法

3. **反馈循环**
   - 收集用户对建议的反馈
   - 改进AI模型

### API端点

根据Swagger API定义，AI建议服务需要实现以下API端点：

- `POST /api/suggestions`: 获取简历和工作描述的AI推荐
- `GET /api/suggestions`: 列出当前用户的AI建议

### 数据存储

- 使用MySQL存储建议数据、反馈和模型参数
- 与OpenAI API集成以生成建议

## 架构设计

根据微服务架构设计文档，这两个服务是独立的微服务，通过API网关进行通信。

### 简历管理服务（MS2）

- **职责**：管理用户简历，包括版本控制、存储和检索
- **主要存储**：S3（用于所有简历文件和版本）
- **内部集成**：AI建议服务、应用跟踪服务

### AI建议服务（MS3）

- **职责**：提供AI驱动的简历改进建议、工作匹配和初步面试问题
- **主要数据库**：MySQL（存储建议数据、反馈、模型参数）
- **外部集成**：OpenAI API
- **内部集成**：简历管理服务

## 技术要求

- 使用Django框架开发微服务
- 实现RESTful API
- 支持文件上传和下载
- 集成外部服务（如OpenAI API）
- 实现服务间通信
- 数据存储在MySQL和S3中

